{"version":3,"sources":["../../package.json","../../src/bin/index.ts","../../src/bin/command/options/index.ts","../../src/utils/git.ts","../../src/bin/command/git/gerrit.ts","../../src/bin/command/git/handler.ts","../../src/bin/command/git/class.ts","../../src/bin/command/git/index.ts","../../src/bin/command/index.ts"],"sourcesContent":["{\n  \"name\": \"st\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"commandName\": \"st\",\n  \"bin\": {\n    \"st\": \"lib/bin/index.js\"\n  },\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\",\n    \"dev\": \"tsup --watch\",\n    \"build\": \"tsup\"\n  },\n  \"files\": [\n    \"lib\"\n  ],\n  \"type\": \"module\",\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"packageManager\": \"pnpm@10.14.0\",\n  \"devDependencies\": {\n    \"@types/module-alias\": \"^2.0.4\",\n    \"@types/node\": \"^24.3.0\",\n    \"tsup\": \"^8.5.0\"\n  },\n  \"dependencies\": {\n    \"commander\": \"^14.0.0\",\n    \"module-alias\": \"^2.2.3\",\n    \"simple-git\": \"^3.28.0\",\n    \"typescript\": \"^5.9.2\"\n  },\n  \"_moduleAliases\": {\n    \"@\": \"./src/bin/\"\n  }\n}\n","#!/usr/bin/env node\n\nimport * as path from \"path\";\nimport { fileURLToPath } from 'url';\nimport alias from \"module-alias\";\nimport { Command } from 'commander';\nconst packageConfig = (await import(\"../../package.json\")).default\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\nalias(path.resolve(__dirname, \"../../\"));\nimport optionsConfig from './command/options/index'\nconst program = new Command(packageConfig.commandName);\nimport commandConfig from './command/index.ts';\nexport interface IOption {\n  command: string\n  value: ((value?: any) => string) | string\n}\nexport interface ICommand {\n  description: string\n  command: string\n  action: (value?: any) => void\n}\nconst initOptions = (commandConfig: IOption[]) => {\n  commandConfig.forEach(config => {\n    const { command, value } = config\n    if (typeof value === 'function') {\n      program.option(command, value())\n    } else {\n      program.option(command, value)\n    }\n  })\n}\nconst initCommand = (commandConfig: ICommand[]) => {\n  commandConfig.forEach(config => {\n    const { description, command, action } = config\n    program\n      .description(description)\n      .command(command)\n      .action((value) => {\n        action(value)\n      })\n  })\n\n}\nconst init = () => {\n  initOptions(optionsConfig)\n  initCommand(commandConfig);\n  program.version(packageConfig.version, '-v, --vers', 'output the current version');\n}\ninit()\nprogram.parse(process.argv);","export default [\n  {\n    command: '-a',\n    value: () => {\n      return '占位';\n    }\n  }\n]","import { simpleGit, CleanOptions } from 'simple-git';\nimport type { SimpleGitOptions } from 'simple-git';\nconst options: Partial<SimpleGitOptions> = {\n  baseDir: process.cwd(),\n  binary: 'git',\n  maxConcurrentProcesses: 6,\n  trimmed: false,\n};\nexport const gitInstance = simpleGit(options);\nexport const getBranch = async () => {\n  const branches = await gitInstance.branch();\n  return branches;\n}\nexport const pushBranch = async (branch: string) => {\n  await gitInstance.push('origin', branch);\n}\nexport const checkBranch = async (branch: string) => {\n  await gitInstance.checkout(branch);\n  const currentBranch = await getBranch();\n  console.log('currentBranch', currentBranch.current);\n  return currentBranch.current;\n}\nexport const add = async () => {\n  await gitInstance.add('.');\n}\nexport const commit = async (message: string) => {\n  await gitInstance.commit(message);\n}","import type { ICommand } from '@/index';\nimport { getBranch, pushBranch } from '@utils/git';\nexport const gerrit: ICommand[] = [{\n  description: 'gerrit push ',\n  command: 'grp',\n  action:async () => {\n    const branches = await getBranch();\n    await pushBranch('HEAD:refs/for/' + branches.current);\n    console.log('HEAD:refs/for/' + branches.current);\n\n  }\n}]","import { getBranch, checkBranch, commit, add } from '@utils/git';\nimport { Command } from './class';\nimport type { ICommand } from '@/index';\nexport const checkBranchHandler: ICommand = new Command(\n  'git checkout ',\n  'gc <branch>',\n  async (branchName?: string) => {\n    if (branchName) {\n      try {\n        console.log(`切换到分支: ${branchName}`);\n        await checkBranch(branchName);\n      } catch (error) {\n        console.error('切换分支失败:', error);\n      }\n      // 这里可以添加实际的切换分支逻辑\n    } else {\n      console.log('请提供分支名称');\n    }\n  }\n)\nexport const getBranchHandler: ICommand = new Command(\n  'git branch ',\n  'gb',\n  () => {\n    console.log('本地分支列表：');\n    getBranch().then(branches => {\n      branches.all.forEach((branch, index) => {\n        console.log(`${index + 1}. ${branch}`);\n      });\n    });\n  }\n)\nexport const getAddHandler: ICommand = new Command(\n  'git add ',\n  'ga',\n  () => {\n    console.log('添加代码');\n    add();\n  }\n)\nexport const getCommitHandler: ICommand = new Command(\n  'git commit ',\n  'gct <message>',\n  async (message?: string) => {\n    try {\n      console.log('提交代码:', message);\n      // await commit(message || '');\n    } catch (error) {\n      console.error('提交代码失败:', error);\n    }\n  }\n)\n","import type { ICommand } from '@/index';\nexport class Command implements ICommand {\n  public description: string;\n  public command: string;\n  public action: () => void;\n  constructor(description: string, command: string, action: () => void) {\n    this.description = description\n    this.command = command\n    this.action = action\n  }\n}","import type { ICommand } from '@/index';\nimport { gerrit } from './gerrit';\nimport * as handler from './handler';\nconst handlerList = Object.values(handler)\nexport const git: ICommand[] = [\n ...gerrit,\n ...handlerList\n]","import { git } from './git/index';\nimport type { ICommand } from '@/index';\nconst command: ICommand[] = [\n  ...git\n]\nexport default command;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA,MACE,MAAQ;AAAA,MACR,SAAW;AAAA,MACX,aAAe;AAAA,MACf,MAAQ;AAAA,MACR,aAAe;AAAA,MACf,KAAO;AAAA,QACL,IAAM;AAAA,MACR;AAAA,MACA,SAAW;AAAA,QACT,MAAQ;AAAA,QACR,KAAO;AAAA,QACP,OAAS;AAAA,MACX;AAAA,MACA,OAAS;AAAA,QACP;AAAA,MACF;AAAA,MACA,MAAQ;AAAA,MACR,UAAY,CAAC;AAAA,MACb,QAAU;AAAA,MACV,SAAW;AAAA,MACX,gBAAkB;AAAA,MAClB,iBAAmB;AAAA,QACjB,uBAAuB;AAAA,QACvB,eAAe;AAAA,QACf,MAAQ;AAAA,MACV;AAAA,MACA,cAAgB;AAAA,QACd,WAAa;AAAA,QACb,gBAAgB;AAAA,QAChB,cAAc;AAAA,QACd,YAAc;AAAA,MAChB;AAAA,MACA,gBAAkB;AAAA,QAChB,KAAK;AAAA,MACP;AAAA,IACF;AAAA;AAAA;;;AClCA,YAAY,UAAU;AACtB,SAAS,qBAAqB;AAC9B,OAAO,WAAW;AAClB,SAAS,WAAAA,gBAAe;;;ACLxB,IAAO,kBAAQ;AAAA,EACb;AAAA,IACE,SAAS;AAAA,IACT,OAAO,MAAM;AACX,aAAO;AAAA,IACT;AAAA,EACF;AACF;;;ACPA,SAAS,iBAA+B;AAExC,IAAM,UAAqC;AAAA,EACzC,SAAS,QAAQ,IAAI;AAAA,EACrB,QAAQ;AAAA,EACR,wBAAwB;AAAA,EACxB,SAAS;AACX;AACO,IAAM,cAAc,UAAU,OAAO;AACrC,IAAM,YAAY,YAAY;AACnC,QAAM,WAAW,MAAM,YAAY,OAAO;AAC1C,SAAO;AACT;AACO,IAAM,aAAa,OAAO,WAAmB;AAClD,QAAM,YAAY,KAAK,UAAU,MAAM;AACzC;AACO,IAAM,cAAc,OAAO,WAAmB;AACnD,QAAM,YAAY,SAAS,MAAM;AACjC,QAAM,gBAAgB,MAAM,UAAU;AACtC,UAAQ,IAAI,iBAAiB,cAAc,OAAO;AAClD,SAAO,cAAc;AACvB;AACO,IAAM,MAAM,YAAY;AAC7B,QAAM,YAAY,IAAI,GAAG;AAC3B;;;ACtBO,IAAM,SAAqB,CAAC;AAAA,EACjC,aAAa;AAAA,EACb,SAAS;AAAA,EACT,QAAO,YAAY;AACjB,UAAM,WAAW,MAAM,UAAU;AACjC,UAAM,WAAW,mBAAmB,SAAS,OAAO;AACpD,YAAQ,IAAI,mBAAmB,SAAS,OAAO;AAAA,EAEjD;AACF,CAAC;;;ACXD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACCO,IAAM,UAAN,MAAkC;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACP,YAAY,aAAqBC,UAAiB,QAAoB;AACpE,SAAK,cAAc;AACnB,SAAK,UAAUA;AACf,SAAK,SAAS;AAAA,EAChB;AACF;;;ADPO,IAAM,qBAA+B,IAAI;AAAA,EAC9C;AAAA,EACA;AAAA,EACA,OAAO,eAAwB;AAC7B,QAAI,YAAY;AACd,UAAI;AACF,gBAAQ,IAAI,mCAAU,UAAU,EAAE;AAClC,cAAM,YAAY,UAAU;AAAA,MAC9B,SAAS,OAAO;AACd,gBAAQ,MAAM,yCAAW,KAAK;AAAA,MAChC;AAAA,IAEF,OAAO;AACL,cAAQ,IAAI,4CAAS;AAAA,IACvB;AAAA,EACF;AACF;AACO,IAAM,mBAA6B,IAAI;AAAA,EAC5C;AAAA,EACA;AAAA,EACA,MAAM;AACJ,YAAQ,IAAI,4CAAS;AACrB,cAAU,EAAE,KAAK,cAAY;AAC3B,eAAS,IAAI,QAAQ,CAAC,QAAQ,UAAU;AACtC,gBAAQ,IAAI,GAAG,QAAQ,CAAC,KAAK,MAAM,EAAE;AAAA,MACvC,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AACF;AACO,IAAM,gBAA0B,IAAI;AAAA,EACzC;AAAA,EACA;AAAA,EACA,MAAM;AACJ,YAAQ,IAAI,0BAAM;AAClB,QAAI;AAAA,EACN;AACF;AACO,IAAM,mBAA6B,IAAI;AAAA,EAC5C;AAAA,EACA;AAAA,EACA,OAAO,YAAqB;AAC1B,QAAI;AACF,cAAQ,IAAI,6BAAS,OAAO;AAAA,IAE9B,SAAS,OAAO;AACd,cAAQ,MAAM,yCAAW,KAAK;AAAA,IAChC;AAAA,EACF;AACF;;;AEhDA,IAAM,cAAc,OAAO,OAAO,eAAO;AAClC,IAAM,MAAkB;AAAA,EAC9B,GAAG;AAAA,EACH,GAAG;AACJ;;;ACLA,IAAM,UAAsB;AAAA,EAC1B,GAAG;AACL;AACA,IAAO,kBAAQ;;;APCf,IAAM,iBAAiB,MAAM,6DAA8B;AAC3D,IAAM,aAAa,cAAc,YAAY,GAAG;AAChD,IAAM,YAAiB,aAAQ,UAAU;AACzC,MAAW,aAAQ,WAAW,QAAQ,CAAC;AAEvC,IAAM,UAAU,IAAIC,SAAQ,cAAc,WAAW;AAWrD,IAAM,cAAc,CAAC,kBAA6B;AAChD,gBAAc,QAAQ,YAAU;AAC9B,UAAM,EAAE,SAAAC,UAAS,MAAM,IAAI;AAC3B,QAAI,OAAO,UAAU,YAAY;AAC/B,cAAQ,OAAOA,UAAS,MAAM,CAAC;AAAA,IACjC,OAAO;AACL,cAAQ,OAAOA,UAAS,KAAK;AAAA,IAC/B;AAAA,EACF,CAAC;AACH;AACA,IAAM,cAAc,CAAC,kBAA8B;AACjD,gBAAc,QAAQ,YAAU;AAC9B,UAAM,EAAE,aAAa,SAAAA,UAAS,OAAO,IAAI;AACzC,YACG,YAAY,WAAW,EACvB,QAAQA,QAAO,EACf,OAAO,CAAC,UAAU;AACjB,aAAO,KAAK;AAAA,IACd,CAAC;AAAA,EACL,CAAC;AAEH;AACA,IAAM,OAAO,MAAM;AACjB,cAAY,eAAa;AACzB,cAAY,eAAa;AACzB,UAAQ,QAAQ,cAAc,SAAS,cAAc,4BAA4B;AACnF;AACA,KAAK;AACL,QAAQ,MAAM,QAAQ,IAAI;","names":["Command","command","Command","command"]}